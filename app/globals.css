@tailwind base;
@tailwind components;
@tailwind utilities;

/* Critical CSS - inline the most important styles for performance */
@layer base {
  /* Critical mobile styles - loaded first to prevent layout shift */
  html {
    overflow-x: hidden;
    scroll-behavior: smooth;
    -webkit-text-size-adjust: 100%;
    -moz-text-size-adjust: 100%;
    text-size-adjust: 100%;
    /* Improve font rendering */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  body {
    overflow-x: hidden;
    /* Disable tap highlights for better mobile UX */
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
    /* Prevent forced reflows */
    contain: layout style;
  }
  
  /* Critical layout styles to prevent CLS */
  .min-h-screen {
    min-height: 100vh;
    min-height: 100dvh; /* Dynamic viewport height for mobile */
  }
  
  /* Touch manipulation for better mobile performance */
  * {
    touch-action: manipulation;
  }
  
  /* Prevent layout shifts from images */
  img {
    height: auto;
    max-width: 100%;
  }
}

/* Import mobile-optimized styles - loaded after critical styles */
@import '../styles/mobile.css' layer(mobile);

/* Enhanced mobile-first responsive design */
@layer base {
  html {
    /* Prevent horizontal scroll on mobile */
    overflow-x: hidden;
    /* Smooth scrolling */
    scroll-behavior: smooth;
    /* Prevent text size adjustment on mobile */
    -webkit-text-size-adjust: 100%;
    -moz-text-size-adjust: 100%;
    text-size-adjust: 100%;
  }
  
  body {
    /* Prevent horizontal scroll */
    overflow-x: hidden;
    /* Better font rendering */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    /* Disable tap highlight on mobile */
    -webkit-tap-highlight-color: transparent;
    /* Prevent text selection on UI elements */
    -webkit-touch-callout: none;
  }
  
  /* Fix for iOS Safari viewport height issues */
  @supports (-webkit-touch-callout: none) {
    .min-h-screen {
      min-height: -webkit-fill-available;
    }
  }
}

@layer components {
  /* Enhanced touch targets for mobile */
  .btn {
    @apply min-h-[44px] px-4 py-2 rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2;
  }
  
  .btn-primary {
    @apply bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500 active:bg-indigo-800;
  }
  
  .btn-secondary {
    @apply bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500 active:bg-gray-400;
  }
  
  .btn-danger {
    @apply bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 active:bg-red-800;
  }
  
  /* Mobile-optimized form inputs */
  .form-input {
    @apply block w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200;
    font-size: 16px; /* Prevents zoom on iOS */
  }
  
  .form-input:invalid {
    @apply border-red-300 text-red-900;
  }
  
  /* Mobile-friendly cards */
  .card {
    @apply bg-white rounded-lg shadow-sm border border-gray-200 p-4 sm:p-6;
  }
  
  .card-header {
    @apply flex items-center justify-between mb-4;
  }
  
  .card-title {
    @apply text-lg font-semibold text-gray-900;
  }
  
  .card-content {
    @apply text-gray-600;
  }
  
  /* Responsive navigation */
  .nav-link {
    @apply flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors duration-200;
  }
  
  .nav-link-active {
    @apply bg-indigo-100 text-indigo-700;
  }
  
  .nav-link-inactive {
    @apply text-gray-600 hover:text-gray-900 hover:bg-gray-50;
  }
}

@layer utilities {
  /* Safe area utilities for mobile devices */
  .pt-safe {
    padding-top: env(safe-area-inset-top);
  }
  
  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  .pl-safe {
    padding-left: env(safe-area-inset-left);
  }
  
  .pr-safe {
    padding-right: env(safe-area-inset-right);
  }
  
  /* Touch-friendly utilities */
  .touch-manipulation {
    touch-action: manipulation;
  }
  
  .touch-pan-x {
    touch-action: pan-x;
  }
  
  .touch-pan-y {
    touch-action: pan-y;
  }
  
  .touch-none {
    touch-action: none;
  }
  
  /* Mobile-specific display utilities */
  .mobile-only {
    @apply block md:hidden;
  }
  
  .desktop-only {
    @apply hidden md:block;
  }
  
  /* Enhanced focus states for accessibility */
  .focus-visible {
    @apply focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2;
  }
  
  /* Smooth transitions for mobile interactions */
  .transition-mobile {
    @apply transition-all duration-200 ease-out;
  }
  
  /* Mobile-optimized text sizes */
  .text-mobile-xs {
    font-size: 12px;
    line-height: 16px;
  }
  
  .text-mobile-sm {
    font-size: 14px;
    line-height: 20px;
  }
  
  .text-mobile-base {
    font-size: 16px;
    line-height: 24px;
  }
  
  .text-mobile-lg {
    font-size: 18px;
    line-height: 28px;
  }
  
  .text-mobile-xl {
    font-size: 20px;
    line-height: 32px;
  }
  
  /* Responsive spacing utilities */
  .space-mobile-y > * + * {
    margin-top: 0.75rem;
  }
  
  @screen sm {
    .space-mobile-y > * + * {
      margin-top: 1rem;
    }
  }
  
  .space-mobile-x > * + * {
    margin-left: 0.75rem;
  }
  
  @screen sm {
    .space-mobile-x > * + * {
      margin-left: 1rem;
    }
  }
}

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 221.2 83.2% 53.3%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96%;
    --secondary-foreground: 222.2 84% 4.9%;
    --muted: 210 40% 96%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96%;
    --accent-foreground: 222.2 84% 4.9%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 221.2 83.2% 53.3%;
    --radius: 0.5rem;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;
    --primary: 217.2 91.2% 59.8%;
    --primary-foreground: 222.2 84% 4.9%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 224.3 76.3% 94.1%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

@layer components {
  .btn {
    @apply inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background;
  }

  .btn-primary {
    @apply btn bg-primary text-primary-foreground hover:bg-primary/90 h-10 py-2 px-4;
  }

  .btn-secondary {
    @apply btn bg-secondary text-secondary-foreground hover:bg-secondary/80 h-10 py-2 px-4;
  }

  .btn-outline {
    @apply btn border border-input hover:bg-accent hover:text-accent-foreground h-10 py-2 px-4;
  }

  .card {
    @apply rounded-lg border bg-card text-card-foreground shadow-sm;
  }

  .input {
    @apply flex h-10 w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50;
  }

  .label {
    @apply text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70;
  }
}